<Window x:Class="PseudoRun.Desktop.Views.Dialogs.ExamModeDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Exam Mode"
        Width="600"
        Height="450"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">

    <Grid>
        <!-- Configuration Screen -->
        <Grid Visibility="{Binding IsConfigurationVisible, Converter={StaticResource BoolToVisibilityConverter}}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border Grid.Row="0"
                    Background="{StaticResource AccentBrush}"
                    Padding="20,15">
                <TextBlock Text="Start Exam Mode"
                           FontSize="20"
                           FontWeight="Bold"
                           Foreground="White"/>
            </Border>

            <!-- Content -->
            <ScrollViewer Grid.Row="1" Padding="30,20">
                <StackPanel>
                    <TextBlock Text="Exam mode simulates real exam conditions:"
                               FontSize="14"
                               Margin="0,0,0,15"/>

                    <StackPanel Margin="0,0,0,20">
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <TextBlock Text="â±" FontSize="16" Margin="0,0,10,0"/>
                            <TextBlock Text="Timed session with countdown" FontSize="13"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <TextBlock Text="ðŸš«" FontSize="16" Margin="0,0,10,0"/>
                            <TextBlock Text="Tutorial and Examples disabled" FontSize="13"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <TextBlock Text="âœ…" FontSize="16" Margin="0,0,10,0"/>
                            <TextBlock Text="Full editor and debugging available" FontSize="13"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <TextBlock Text="ðŸ’¾" FontSize="16" Margin="0,0,10,0"/>
                            <TextBlock Text="Your code is automatically saved" FontSize="13"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Duration Selector -->
                    <TextBlock Text="Exam Duration:"
                               FontWeight="Bold"
                               FontSize="14"
                               Margin="0,0,0,10"/>
                    <ComboBox ItemsSource="{Binding AvailableDurations}"
                              SelectedItem="{Binding SelectedDuration}"
                              Width="200"
                              HorizontalAlignment="Left"
                              Padding="10,8">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock>
                                    <Run Text="{Binding}"/>
                                    <Run Text=" minutes"/>
                                </TextBlock>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>

                    <TextBlock Text="Recommended: 45 minutes for typical IGCSE problems"
                               FontSize="11"
                               Foreground="{StaticResource SecondaryTextBrush}"
                               Margin="0,5,0,0"/>
                </StackPanel>
            </ScrollViewer>

            <!-- Footer -->
            <Border Grid.Row="2"
                    Background="{StaticResource SurfaceBrush}"
                    Padding="20,15"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="0,1,0,0">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Cancel"
                            Command="{Binding CancelCommand}"
                            Width="100"
                            Margin="0,0,10,0"/>
                    <Button Content="Start Exam"
                            Command="{Binding StartExamCommand}"
                            Style="{StaticResource PrimaryButton}"
                            Width="120"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Timer Screen -->
        <Grid Visibility="{Binding IsTimerVisible, Converter={StaticResource BoolToVisibilityConverter}}">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Timer Display -->
            <StackPanel Grid.Row="0"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center">
                <TextBlock Text="EXAM IN PROGRESS"
                           FontSize="18"
                           FontWeight="Bold"
                           HorizontalAlignment="Center"
                           Foreground="{StaticResource SecondaryTextBrush}"
                           Margin="0,0,0,30"/>

                <Border Background="{StaticResource SurfaceBrush}"
                        BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="2"
                        CornerRadius="10"
                        Padding="40,30"
                        HorizontalAlignment="Center">
                    <StackPanel>
                        <TextBlock Text="{Binding TimeDisplay}"
                                   FontSize="72"
                                   FontWeight="Bold"
                                   FontFamily="Consolas"
                                   HorizontalAlignment="Center">
                            <TextBlock.Foreground>
                                <SolidColorBrush Color="{Binding TimeColor}"/>
                            </TextBlock.Foreground>
                        </TextBlock>

                        <TextBlock Text="TIME REMAINING"
                                   FontSize="14"
                                   HorizontalAlignment="Center"
                                   Foreground="{StaticResource SecondaryTextBrush}"
                                   Margin="0,10,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Progress Bar -->
                <ProgressBar Value="{Binding ProgressPercentage}"
                             Maximum="100"
                             Height="20"
                             Width="300"
                             Margin="0,30,0,0"/>

                <!-- Pause Warning -->
                <TextBlock Text="âš  PAUSED"
                           FontSize="16"
                           FontWeight="Bold"
                           Foreground="{StaticResource WarningBrush}"
                           HorizontalAlignment="Center"
                           Margin="0,20,0,0"
                           Visibility="{Binding IsPaused, Converter={StaticResource BoolToVisibilityConverter}}"/>
            </StackPanel>

            <!-- Control Buttons -->
            <Border Grid.Row="1"
                    Background="{StaticResource SurfaceBrush}"
                    Padding="20,15"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="0,1,0,0">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button Content="{Binding IsPaused, Converter={StaticResource PauseResumeTextConverter}}"
                            Command="{Binding PauseResumeCommand}"
                            Width="100"
                            Margin="0,0,10,0"/>
                    <Button Content="End Exam"
                            Command="{Binding EndExamCommand}"
                            Width="100"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Completion Screen -->
        <Grid Visibility="{Binding IsCompletedVisible, Converter={StaticResource BoolToVisibilityConverter}}">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Completion Message -->
            <StackPanel Grid.Row="0"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        Margin="40">
                <TextBlock Text="âœ…"
                           FontSize="64"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,20"/>

                <TextBlock Text="Exam Complete!"
                           FontSize="28"
                           FontWeight="Bold"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,10"/>

                <TextBlock Text="Your code has been saved."
                           FontSize="14"
                           HorizontalAlignment="Center"
                           Foreground="{StaticResource SecondaryTextBrush}"
                           Margin="0,0,0,30"/>

                <Border Background="{StaticResource SurfaceBrush}"
                        BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="5"
                        Padding="20"
                        HorizontalAlignment="Center">
                    <StackPanel>
                        <TextBlock Text="Remember to:"
                                   FontWeight="Bold"
                                   Margin="0,0,0,10"/>
                        <TextBlock Text="â€¢ Review your code for any errors" Margin="0,3"/>
                        <TextBlock Text="â€¢ Test your program thoroughly" Margin="0,3"/>
                        <TextBlock Text="â€¢ Save your work before closing" Margin="0,3"/>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- Close Button -->
            <Border Grid.Row="1"
                    Background="{StaticResource SurfaceBrush}"
                    Padding="20,15"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="0,1,0,0">
                <Button Content="Close"
                        IsCancel="True"
                        Width="100"
                        HorizontalAlignment="Center"/>
            </Border>
        </Grid>
    </Grid>
</Window>
